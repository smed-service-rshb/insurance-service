set search_path to 'insurance_service';

CREATE TABLE IF NOT EXISTS PROGRAM_RELATED_GROUP (
   id BIGSERIAL NOT NULL,
   programId BIGINT NOT NULL,
   name VARCHAR(255) NOT NULL,
   PRIMARY KEY (ID)
);

ALTER TABLE PROGRAM_RELATED_GROUP
  DROP CONSTRAINT IF EXISTS PROGRAM_RELATED_GROUP_PROGRAM_ID_FK;

ALTER TABLE PROGRAM_RELATED_GROUP
  ADD CONSTRAINT PROGRAM_RELATED_GROUP_PROGRAM_ID_FK
    FOREIGN KEY (programId)
      REFERENCES program_v2(id);

ALTER TABLE program_v2
  ADD COLUMN IF NOT EXISTS relatedEmployeeGroupFilterType VARCHAR(11);